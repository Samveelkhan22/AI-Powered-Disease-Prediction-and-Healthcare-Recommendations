<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Health Care Center</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #3498db;
      --secondary-color: #2ecc71;
      --accent-color: #9b59b6;
      --dark-color: #2c3e50;
      --light-color: #ecf0f1;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8f9fa;
      color: #333;
    }

    /* Webkit browsers (Chrome, Safari) */
::-webkit-scrollbar {
    width: 12px; /* Thin width */
    height: 12px; /* For horizontal scrollbar */
}

::-webkit-scrollbar-track {
    background: #ffecb3; /* Light yellow background */
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    
    background: linear-gradient(90deg, var(--dark-color), var(--primary-color));
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(90deg, var(--primary-color), var(--dark-color));
}


    
    .navbar {
      background: linear-gradient(135deg, var(--dark-color), var(--primary-color)) !important;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 12px 0;
    }
    
    .navbar-brand {
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: 0.5px;
      margin-left: 10px;
    }
    
    .logo {
      display: flex;
      align-items: center;
    }
    
    .myimg {
      width: 50px;
      height: 50px;
      border: 3px solid var(--secondary-color);
      border-radius: 50%;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      transition: transform 0.3s;
    }
    
    .myimg:hover {
      transform: scale(1.1);
    }
    
    .nav-link {
      font-weight: 500;
      padding: 8px 16px !important;
      border-radius: 4px;
      transition: all 0.3s;
    }
    
    .nav-link:hover {
      background-color: rgba(255,255,255,0.1);
      transform: translateY(-2px);
    }
    
    .nav-link.active {
      background-color: var(--secondary-color) !important;
      color: white !important;
    }
    
    .search-form {
      position: relative;
    }
    
    .search-form input {
      border-radius: 20px;
      padding-left: 15px;
      border: none;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .search-form button {
      border-radius: 20px;
      background-color: var(--secondary-color);
      border: none;
      color: white;
      padding: 8px 15px;
      transition: all 0.3s;
    }
    
    .search-form button:hover {
      background-color: var(--accent-color);
      transform: translateX(3px);
    }
    
    .page-header {
      color: var(--primary-color);
      font-size: 2.5rem;
      font-weight: 700;
      text-align: center;
      margin: 2rem 0;
      position: relative;
      padding-bottom: 10px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    
    .page-header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      border-radius: 2px;
    }
    
    .main-form {
      background: linear-gradient(135deg, var(--dark-color), #1a2a3a);
      color: white;
      border-radius: 15px;
      padding: 40px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      margin-bottom: 3rem;
      position: relative;
      overflow: hidden;
    }
    
    .main-form::before {
      content: '';
      position: absolute;
      top: -50px;
      right: -50px;
      width: 100px;
      height: 100px;
      background: rgba(255,255,255,0.05);
      border-radius: 50%;
    }
    
    .form-group label {
      font-weight: 600;
      margin-bottom: 10px;
      font-size: 1.1rem;
      display: block;
    }
    
    .form-control {
      border-radius: 8px;
      padding: 12px 15px;
      border: 1px solid rgba(255,255,255,0.1);
      background-color: rgba(255,255,255,0.05);
      color: white;
      font-size: 1rem;
      transition: all 0.3s;
    }
    
    .form-control:focus {
      background-color: rgba(255,255,255,0.1);
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
      border-color: var(--primary-color);
    }
    
    .form-control::placeholder {
      color: rgba(255,255,255,0.5);
    }
    
    .speech-btn {
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 30px;
      padding: 10px 20px;
      font-weight: 600;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .speech-btn:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .speech-btn:active {
      transform: translateY(0);
    }
    
    .speech-btn i {
      font-size: 1.2rem;
    }
    
    .submit-btn {
      background: linear-gradient(to right, var(--secondary-color), var(--primary-color));
      color: white;
      border: none;
      border-radius: 8px;
      padding: 15px;
      font-size: 1.2rem;
      font-weight: 700;
      letter-spacing: 1px;
      width: 100%;
      transition: all 0.3s;
      margin-top: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .submit-btn:hover {
      background: linear-gradient(to right, var(--primary-color), var(--accent-color));
      transform: translateY(-3px);
      box-shadow: 0 7px 20px rgba(0,0,0,0.3);
    }
    
    .submit-btn:active {
      transform: translateY(-1px);
    }
    
    .logout-btn {
  background: linear-gradient(to right, #f8576f, #e74c3c);
  color: white;
  border: none;
  border-radius: 20px;
  padding: 8px 15px;
  font-weight: 600;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  transition: all 0.3s;
  display: flex;
  align-items: center;
  gap: 5px;
}

.logout-btn:hover {
  background: linear-gradient(to right, #e74c3c, #c0392b);
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  color: white;
}

.logout-btn:active {
  transform: translateY(0);
}

.username-display {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border-radius: 20px;
    padding: 6px 12px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    transition: all 0.3s;
}

.username-display i {
    color: var(--secondary-color);
    font-size: 1.1rem;
}

.username-display:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateY(-2px);
}

    #transcription {
      margin-top: 15px;
      padding: 10px;
      min-height: 50px;
      background-color: rgba(255,255,255,0.05);
      border-radius: 8px;
      border-left: 4px solid var(--primary-color);
    }
    
    .result-section {
      margin-top: 4rem;
      padding-bottom: 3rem;
      display: none; /* Hide initially */
    }
    
    .result-section.show {
      display: block; /* Show when results are available */
      animation: fadeIn 0.5s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .result-section h1 {
      margin-bottom: 2rem;
    }
    
    .result-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      overflow: hidden;
      margin-bottom: 2rem;
      transition: all 0.3s;
    }
    
    .result-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    .result-card-header {
      padding: 20px;
      background: linear-gradient(135deg, var(--dark-color), var(--primary-color));
      color: white;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .result-card-header i {
      font-size: 2rem;
    }
    
    .result-card-header h2 {
      margin: 0;
      font-size: 1.5rem;
      font-weight: 700;
    }
    
    .result-card-body {
      padding: 25px;
    }
    
    .result-card-body h3 {
      color: var(--primary-color);
      margin-bottom: 15px;
      font-weight: 600;
    }
    
    .result-card-body ul {
      padding-left: 20px;
    }
    
    .result-card-body ul li {
      margin-bottom: 10px;
      line-height: 1.6;
    }
    
    .result-card-body p {
      line-height: 1.7;
      margin-bottom: 0;
    }
    
    .result-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 30px;
      justify-content: center;
    }
    
    .result-pill {
      padding: 8px 15px;
      border-radius: 50px;
      font-weight: 600;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: all 0.2s;
    }
    
    .result-pill:hover {
      transform: translateY(-2px);
      cursor: pointer;
    }
    
    .pill-disease {
      background-color: #F39334;
    }
    
    .pill-description {
      background-color: #268AF3;
      color: white;
    }
    
    .pill-precaution {
      background-color: #F371F9;
    }
    
    .pill-medications {
      background-color: #F8576F;
      color: white;
    }
    
    .pill-workouts {
      background-color: #99F741;
    }
    
    .pill-diets {
      background-color: #E5E23D;
    }
    
    .new-search-btn {
      background-color: var(--secondary-color);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 15px 25px;
      font-size: 1.1rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0 auto;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .new-search-btn:hover {
      background-color: var(--accent-color);
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    }
    
    .disclaimer {
      background-color: rgba(52, 152, 219, 0.1);
      border-left: 4px solid var(--primary-color);
      padding: 15px;
      border-radius: 5px;
      margin: 30px 0;
    }
    
    .disclaimer p {
      margin: 0;
      font-size: 0.95rem;
      color: #2c3e50;
    }
    
    .pulse-animation {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.4);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(46, 204, 113, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(46, 204, 113, 0);
      }
    }
    
    .health-icon {
      color: var(--secondary-color);
      font-size: 2rem;
      margin-right: 10px;
    }
    
    .listening-animation {
      display: none;
      color: var(--primary-color);
      font-size: 1.2rem;
      margin-left: 10px;
    }
    
    .listening-animation.active {
      display: inline-block;
      animation: listening 1.5s infinite;
    }
    
    @keyframes listening {
      0% { opacity: 0.3; }
      50% { opacity: 1; }
      100% { opacity: 0.3; }
    }
    
    /* Loading animation */
    .loading {
      display: none;
      text-align: center;
      padding: 20px;
    }
    
    .loading.show {
      display: block;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      margin: 0 auto;
      border: 4px solid rgba(0,0,0,0.1);
      border-radius: 50%;
      border-top: 4px solid var(--primary-color);
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @media (max-width: 768px) {
      .main-form, .result-card {
        padding: 20px;
      }
      
      .page-header {
        font-size: 2rem;
      }
    }
  </style>

  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">


</head>
<body>

<!-- Favicon (Recommended in .ico format) -->
<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
<link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
  
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container">
      <!-- Logo -->
      <div class="logo">
          <img class="myimg" src="{{ url_for('static', filename='img.png') }}" alt="Health Center Logo">
          <a class="navbar-brand" href="#">
              <i class=""></i>Health Center
          </a>
      </div>

      <!-- Toggle Button -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" 
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Navbar Links -->
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                  <a class="nav-link active" href="#"><i class="fas fa-home"></i> Home</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="/about"><i class="fas fa-info-circle"></i> About</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="/contact"><i class="fas fa-envelope"></i> Contact</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="/developer"><i class="fas fa-code"></i> Developer</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="/history"><i class="fas fa-history"></i> history</a>
              </li>
          </ul>

          <!-- Show Username and Logout Button if User is Logged In -->
          {% if session.username %}
          <span class="navbar-text username-display me-3">
            <i class="fas fa-user-circle"></i> {{ session.username }}
          </span>
              <a class="btn logout-btn" href="{{ url_for('logout') }}">
                <i class="fas fa-sign-out-alt"></i> Logout
              </a>
          {% else %}
              <!-- Show Login Button if Not Logged In -->
              <a class="btn btn-primary" href="{{ url_for('login') }}">Login</a>
          {% endif %}
      </div>
  </div>
</nav>


  <!-- Main Content -->
  <div class="container">
    <h1 class="page-header">
      <i class="fas fa-heartbeat"></i> Health Care Center
    </h1>
    
    <!-- Main Form -->
    <div class="main-form" id="searchForm">
      <form id="symptomForm" action="/predict" method="post">
        <div class="form-group">
          <label for="symptoms">
            <i class="fas fa-clipboard-list"></i> Select Symptoms:
          </label>
          <input type="text" class="form-control" id="symptoms" name="symptoms" placeholder="Type symptoms such as itching, sleeping, aching, etc.">
        </div>
        
        <div class="mt-3">
          <button type="button" id="startSpeechRecognition" class="speech-btn">
            <i class="fas fa-microphone"></i> Voice Input
            <span id="listening" class="listening-animation">Listening...</span>
          </button>
        </div>
        
        <!-- Transcription Area -->
        <div id="transcription" class="mt-3"></div>
        
        {% if message %}
        <div class="alert alert-info mt-3">
          <i class="fas fa-info-circle"></i> {{ message }}
        </div>
        {% endif %}
        
        <button type="submit" id="analyzeBtn" class="submit-btn pulse-animation">
          <i class="fas fa-search-plus"></i> Analyze Symptoms
        </button>
      </form>
    </div>
    
    <!-- Loading indicator -->
    <div class="loading" id="loadingIndicator">
      <div class="spinner"></div>
      <p class="mt-3">Analyzing your symptoms...</p>
    </div>
    
    <!-- Results Section -->
    <div class="result-section" id="resultSection">
      <h1 class="page-header">
        <i class="fas fa-stethoscope"></i> AI Analysis Results
      </h1>
      
      <!-- Navigation pills for results -->
      <div class="result-pills">
        <div class="result-pill pill-disease" data-target="diseaseSection">
          <i class="fas fa-virus"></i> Disease
        </div>
        <div class="result-pill pill-description" data-target="descriptionSection">
          <i class="fas fa-info-circle"></i> Description
        </div>
        <div class="result-pill pill-precaution" data-target="precautionSection">
          <i class="fas fa-shield-alt"></i> Precaution
        </div>
        <div class="result-pill pill-medications" data-target="medicationSection">
          <i class="fas fa-pills"></i> Medications
        </div>
        <div class="result-pill pill-workouts" data-target="workoutSection">
          <i class="fas fa-running"></i> Workouts
        </div>
        <div class="result-pill pill-diets" data-target="dietSection">
          <i class="fas fa-apple-alt"></i> Diets
        </div>
      </div>
      
      <!-- Disease Card -->
      <div class="result-card" id="diseaseSection">
        <div class="result-card-header">
          <i class="fas fa-virus"></i>
          <h2>Predicted Disease</h2>
        </div>
        <div class="result-card-body">
          <p id="diseaseName">{{ predicted_disease }}</p>
        </div>
      </div>
      
      <!-- Description Card -->
      <div class="result-card" id="descriptionSection" style="display: none;">
        <div class="result-card-header">
          <i class="fas fa-info-circle"></i>
          <h2>Description</h2>
        </div>
        <div class="result-card-body">
          <p id="diseaseDescription">{{ dis_des }}</p>
        </div>
      </div>
      
      <!-- Precaution Card -->
      <div class="result-card" id="precautionSection" style="display: none;">
        <div class="result-card-header">
          <i class="fas fa-shield-alt"></i>
          <h2>Precautions</h2>
        </div>
        <div class="result-card-body">
          <ul id="precautionList">
            {% for i in my_precautions %}
              <li>{{ i }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
      
      <!-- Medication Card -->
      <div class="result-card" id="medicationSection" style="display: none;">
        <div class="result-card-header">
          <i class="fas fa-pills"></i>
          <h2>Medications</h2>
        </div>
        <div class="result-card-body">
          <ul id="medicationList">
            {% set medications_cleaned = medications|replace("[", "")|replace("]", "")|replace("'", "") %}
            {% for med in medications_cleaned.split(',') %}
              <li>{{ med.strip() }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
      
      
      <!-- Workout Card -->
      <div class="result-card" id="workoutSection" style="display: none;">
        <div class="result-card-header">
          <i class="fas fa-running"></i>
          <h2>Recommended Workouts</h2>
        </div>
        <div class="result-card-body">
          <ul id="workoutList">
            {% for i in workout %}
              <li>{{ i }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
      
<!-- Diet Card -->
<div class="result-card" id="dietSection" style="display: none;">
  <div class="result-card-header">
    <i class="fas fa-apple-alt"></i>
    <h2>Recommended Diet</h2>
  </div>
  <div class="result-card-body">
    <ul id="dietList">
      {% set diet_cleaned = my_diet|replace("[", "")|replace("]", "")|replace("'", "") %}
      {% for diet_item in diet_cleaned.split(',') %}
        <li>{{ diet_item.strip() }}</li>
      {% endfor %}
    </ul>
  </div>
</div>
      
      <!-- Medical Disclaimer -->
      <div class="disclaimer">
        <p><i class="fas fa-exclamation-circle me-2"></i> <strong>Important:</strong> This analysis is based on AI predictions and should not replace professional medical advice. Always consult with a healthcare provider for proper diagnosis and treatment.</p>
      </div>
      
      <!-- New Search Button -->
      <button id="newSearchBtn" class="new-search-btn">
        <i class="fas fa-search"></i> Search New Symptoms
      </button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
  <script>
    // DOM Elements
    const startSpeechRecognitionButton = document.getElementById('startSpeechRecognition');
    const transcriptionDiv = document.getElementById('transcription');
    const listeningIndicator = document.getElementById('listening');
    const symptomsInput = document.getElementById('symptoms');
    const symptomForm = document.getElementById('symptomForm');
    const analyzeBtn = document.getElementById('analyzeBtn');
    const searchForm = document.getElementById('searchForm');
    const resultSection = document.getElementById('resultSection');
    const newSearchBtn = document.getElementById('newSearchBtn');
    const loadingIndicator = document.getElementById('loadingIndicator');
    const resultPills = document.querySelectorAll('.result-pill');
    
    // Check if there are results to show
    const hasResults = {% if predicted_disease %} true {% else %} false {% endif %};
    
    // Show results if available
    if (hasResults) {
      searchForm.style.display = 'none';
      resultSection.classList.add('show');
    }
    
    // Speech Recognition
    startSpeechRecognitionButton.addEventListener('click', startSpeechRecognition);
    
    function startSpeechRecognition() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      
      recognition.lang = 'en-US';
      recognition.interimResults = true;
      
      // Show the listening indicator
      listeningIndicator.classList.add('active');
      startSpeechRecognitionButton.classList.add('btn-danger');
      startSpeechRecognitionButton.querySelector('i').className = 'fas fa-microphone-slash';
      
      recognition.onresult = function(event) {
        const result = event.results[0][0].transcript;
        transcriptionDiv.textContent = result;
        symptomsInput.value = result; // Also update the input field
      };
      
      recognition.onend = function() {
        console.log('Speech recognition ended.');
        listeningIndicator.classList.remove('active');
        startSpeechRecognitionButton.classList.remove('btn-danger');
        startSpeechRecognitionButton.querySelector('i').className = 'fas fa-microphone';
      };
      
      recognition.start();
    }
    
    // Form submission with loading state
    symptomForm.addEventListener('submit', function(e) {
      // Don't prevent default, let the form submit
      searchForm.style.display = 'none';
      loadingIndicator.classList.add('show');
    });
    
    // New search button
    newSearchBtn.addEventListener('click', function() {
      symptomsInput.value = '';
      transcriptionDiv.textContent = '';
      
      resultSection.classList.remove('show');
      searchForm.style.display = 'block';
      
      // Scroll to search form
      searchForm.scrollIntoView({ behavior: 'smooth' });
    });
    
    // Result pills navigation
    resultPills.forEach(pill => {
      pill.addEventListener('click', function() {
        const targetId = this.getAttribute('data-target');
        
        // Hide all sections
        document.querySelectorAll('.result-card').forEach(card => {
          card.style.display = 'none';
        });
        
        // Show selected section
        document.getElementById(targetId).style.display = 'block';
      });
    });
  </script>
</body>
</html>